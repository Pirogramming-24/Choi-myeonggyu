{% extends 'base.html' %}

{% block title %}ì•„ì´ë””ì–´ ìˆ˜ì •{% endblock %}

{% block extra_css %}
<style>
    /* í¼ ì»¨í…Œì´ë„ˆ */
    .form-container {
        max-width: 600px;
        margin: 0 auto;
        background-color: #2D2D2D;
        padding: 40px;
        border-radius: 15px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.5);
        color: white;
    }

    .form-title {
        text-align: center; margin-bottom: 30px; color: #A6E22E; font-size: 2rem;
    }

    .form-group { margin-bottom: 20px; }

    label { display: block; margin-bottom: 8px; font-weight: bold; color: #ddd; }

    input[type="text"], input[type="number"], input[type="file"], textarea, select {
        width: 100%; padding: 12px; background-color: #444; border: 1px solid #555;
        border-radius: 8px; color: white; font-size: 1rem; outline: none; box-sizing: border-box;
    }
    input:focus, textarea:focus, select:focus { border-color: #A6E22E; }

    .btn-group { display: flex; justify-content: flex-end; gap: 10px; margin-top: 30px; }
    
    .btn {
        padding: 12px 24px; border: none; border-radius: 8px; font-size: 1rem; 
        font-weight: bold; cursor: pointer; text-decoration: none; text-align: center; color: white;
    }
    .btn:hover { opacity: 0.9; }
    .btn-submit { background-color: #A6E22E; color: #121212; }
    .btn-cancel { background-color: #555; }
    
    /* í˜„ì¬ ì´ë¯¸ì§€ ë§í¬ ìŠ¤íƒ€ì¼ */
    .current-img-link { color: #A6E22E; text-decoration: none; font-size: 0.9rem; display: inline-block; margin-bottom: 10px; }
    .current-img-link:hover { text-decoration: underline; }
</style>
{% endblock %}

{% block content %}
<div class="form-container">
    <h1 class="form-title">ğŸ› ï¸ ì•„ì´ë””ì–´ ìˆ˜ì •í•˜ê¸°</h1>

    <form action="" method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        
        <div class="form-group">
            <label for="title">ì•„ì´ë””ì–´ëª…</label>
            <input type="text" name="title" id="title" value="{{ idea.title }}" required>
        </div>

        <div class="form-group">
            <label>í˜„ì¬ ì´ë¯¸ì§€</label>
            {% if idea.image %}
                <a href="{{ idea.image.url }}" target="_blank" class="current-img-link">
                    ğŸ“ í˜„ì¬ ë“±ë¡ëœ ì´ë¯¸ì§€ í™•ì¸í•˜ê¸°
                </a>
            {% else %}
                <span style="color: #888;">(ì´ë¯¸ì§€ ì—†ìŒ)</span>
            {% endif %}
            
            <label for="image" style="margin-top: 10px;">ì´ë¯¸ì§€ êµì²´ (ì„ íƒ)</label>
            <input type="file" name="image" id="image">
        </div>

        <div class="form-group">
            <label for="content">ì„¤ëª…</label>
            <textarea name="content" id="content" cols="30" rows="5">{{ idea.content }}</textarea>
        </div>

        <div class="form-group">
            <label for="interest">ê´€ì‹¬ë„</label>
            <input type="number" name="interest" id="interest" value="{{ idea.interest }}" min="0" max="7">
        </div>

        <div class="form-group">
            <label for="devtool">ì˜ˆìƒ ê°œë°œíˆ´</label>
            <select name="devtool" id="devtool">
                {% for tool in devtools %}
                    <option value="{{ tool.pk }}" {% if tool.pk == idea.devtool.pk %}selected{% endif %}>
                        {{ tool.name }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <div class="btn-group">
            <a href="{% url 'ideas:idea_detail' idea.pk %}" class="btn btn-cancel">ì·¨ì†Œ</a>
            <button type="submit" class="btn btn-submit">ìˆ˜ì • ì™„ë£Œ</button>
        </div>
    </form>
</div>
{% endblock %}