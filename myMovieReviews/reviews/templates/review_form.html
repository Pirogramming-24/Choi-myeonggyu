<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ë¦¬ë·° ì‘ì„±</title>
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f8f9fa;
            color: #333;
            margin: 0;
            padding: 40px 20px;
        }
        
        .container {
            max-width: 600px;
            margin: 0 auto;
            background-color: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        h2 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2em;
            color: #333;
        }
        h2 span { color: #007bff; }

        /* í¼ ìš”ì†Œ ìŠ¤íƒ€ì¼ë§ */
        label {
            font-weight: bold;
            display: block;
            margin-bottom: 8px;
            margin-top: 20px;
        }

        /* ì…ë ¥ì°½ë“¤ì„ ì˜ˆì˜ê²Œ ê¾¸ë¯¸ê¸° */
        input[type="text"],
        input[type="number"],
        select,
        textarea,
        input[type="file"] {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            box-sizing: border-box; /* íŒ¨ë”© í¬í•¨ í¬ê¸° ê³„ì‚° */
            transition: border-color 0.2s;
        }

        input:focus, select:focus, textarea:focus {
            border-color: #007bff;
            outline: none;
        }

        textarea { height: 200px; resize: vertical; }

        /* ë³„ì  ìŠ¤íƒ€ì¼ (ê¸°ì¡´ ì½”ë“œ ìœ ì§€ + ì •ë ¬) */
        .star-rating {
            display: flex;
            font-size: 2.5em;
            cursor: pointer;
            margin-bottom: 10px;
        }
        .star {
            color: #ddd;
            margin-right: 5px;
            transition: color 0.2s;
        }
        .star.hover { color: #555; }
        .star.active { color: #f39c12; }

        /* ë²„íŠ¼ ê·¸ë£¹ */
        .btn-group {
            display: flex;
            gap: 10px;
            margin-top: 40px;
        }

        button[type="submit"] {
            flex: 2; /* ì €ì¥ ë²„íŠ¼ì„ ë” ë„“ê²Œ */
            background-color: #007bff;
            color: white;
            border: none;
            padding: 15px;
            font-size: 1.1em;
            font-weight: bold;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        button[type="submit"]:hover { background-color: #0056b3; }

        .btn-cancel {
            flex: 1;
            text-align: center;
            text-decoration: none;
            background-color: #e9ecef;
            color: #495057;
            padding: 15px;
            border-radius: 8px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .btn-cancel:hover { background-color: #dee2e6; }

    </style>
</head>
<body>

    <div class="container">
        <h2>
            {% if action == 'ìˆ˜ì •' %}
                ğŸ¬ ë¦¬ë·° <span>ìˆ˜ì •</span>í•˜ê¸°
            {% else %}
                ğŸ“ ìƒˆ ë¦¬ë·° <span>ì‘ì„±</span>í•˜ê¸°
            {% endif %}
        </h2>

        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            
            {% for field in form %}
                
                {% if field.name == 'rating' %}
                    {% elif field.name == 'runtime' %}
                    <div style="margin-bottom: 10px;">
                        <label>â­ ë³„ì </label>
                        {{ form.rating }} <div class="star-rating" id="star-container">
                            <span class="star" data-value="1">â˜…</span>
                            <span class="star" data-value="2">â˜…</span>
                            <span class="star" data-value="3">â˜…</span>
                            <span class="star" data-value="4">â˜…</span>
                            <span class="star" data-value="5">â˜…</span>
                        </div>
                    </div>

                    <label for="{{ field.id_for_label }}">â± ëŸ¬ë‹íƒ€ì„ (ë¶„)</label>
                    {{ field }}

                {% elif field.name == 'image' %}
                    <label for="{{ field.id_for_label }}">ğŸ“· í¬ìŠ¤í„° ì´ë¯¸ì§€</label>
                    {{ field }}

                {% else %}
                    <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                    {{ field }}
                {% endif %}

            {% endfor %}

            <div class="btn-group">
                {% if action == 'ìˆ˜ì •' %}
                    <a href="{% url 'review_detail' form.instance.pk %}" class="btn-cancel">ì·¨ì†Œ</a>
                {% else %}
                    <a href="{% url 'review_list' %}" class="btn-cancel">ì·¨ì†Œ</a>
                {% endif %}
                <button type="submit">ì €ì¥í•˜ê¸°</button>
            </div>
        </form>
    </div>

    <script>
        // [ë³„ì  ë¡œì§] ê¸°ì¡´ ì½”ë“œì™€ ë™ì¼í•©ë‹ˆë‹¤.
        const stars = document.querySelectorAll('.star');
        const ratingInput = document.querySelector('input[name="rating"]');

        const currentRating = ratingInput.value;
        if (currentRating) {
            highlightStars(currentRating, 'active');
        }

        stars.forEach(star => {
            star.addEventListener('mouseover', function() {
                const value = this.getAttribute('data-value');
                resetStars();
                highlightStars(value, 'hover');
            });

            star.addEventListener('mouseout', function() {
                resetStars();
                if (ratingInput.value) {
                    highlightStars(ratingInput.value, 'active');
                }
            });

            star.addEventListener('click', function() {
                const value = this.getAttribute('data-value');
                ratingInput.value = value;
                resetStars();
                highlightStars(value, 'active');
            });
        });

        function highlightStars(targetValue, className) {
            stars.forEach(star => {
                if (parseInt(star.getAttribute('data-value')) <= parseInt(targetValue)) {
                    star.classList.add(className);
                }
            });
        }

        function resetStars() {
            stars.forEach(star => {
                star.classList.remove('hover', 'active');
            });
        }
    </script>
</body>
</html>